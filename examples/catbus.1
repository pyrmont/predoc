.\"
.\" Generated by predoc at 2025-08-18T23:23:49Z
.\"
.Dd August 10, 2025
.Dt CATBUS 1
.Os catbus 0.1-dev
.
.Sh NAME
.Nm catbus
.Nd a happy IRC client
.
.Sh SYNOPSIS
.Nm
.Oo
.Eo
.Fl Relqv
.Ec
.Oc
.Oo
.Eo
.Fl C
.Ec 
.Eo
.Ar value
.Ec
.Oc
.Oo
.Eo
.Fl H
.Ec 
.Eo
.Ar seed
.Ec
.Oc
.Oo
.Eo
.Fl I
.Ec 
.Eo
.Ar pattern
.Ec
.Oc
.Oo
.Eo
.Fl N
.Ec 
.Eo
.Ar value
.Ec
.Oc
.Oo
.Eo
.Fl O
.Ec 
.Eo
.Ar value
.Ec
.Oc
.Oo
.Eo
.Fl S
.Ec 
.Eo
.Ar addr
.Ec
.Oc
.Oo
.Eo
.Fl T
.Ec Ns
.Oo
.Eo
.Ar format
.Ec
.Oc
.Oc
.Oo
.Eo
.Fl a
.Ec 
.Eo
.Ar user:pass
.Ec
.Oc
.Oo
.Eo
.Fl c
.Ec 
.Eo
.Ar path
.Ec
.Oc
.Oo
.Eo
.Fl i
.Ec 
.Eo
.Ar pattern
.Ec
.Oc
[\c
.Eo
.Fl j
.Ec 
.Eo
.Ar channels
.Ec
.Oo
.Eo
.Ar keys
.Ec
.Oc
] 
.Oo
.Eo
.Fl k
.Ec 
.Eo
.Ar path
.Ec
.Oc
.Oo
.Eo
.Fl m
.Ec 
.Eo
.Ar modes
.Ec
.Oc
[\c
.Eo
.Fl n
.Ec 
.Eo
.Ar nick
.Ec
.Oo
.Eo
.No ...
.Ec
.Oc
] 
.Oo
.Eo
.Fl p
.Ec 
.Eo
.Ar port
.Ec
.Oc
.Oo
.Eo
.Fl r
.Ec 
.Eo
.Ar name
.Ec
.Oc
.Oo
.Eo
.Fl s
.Ec 
.Eo
.Ar path
.Ec
.Oc
.Oo
.Eo
.Fl t
.Ec 
.Eo
.Ar path
.Ec
.Oc
.Oo
.Eo
.Fl u
.Ec 
.Eo
.Ar username
.Ec
.Oc
.Oo
.Eo
.Fl w
.Ec 
.Eo
.Ar pass
.Ec
.Oc
.Oo
.Eo
.Fl h
.Ec 
.Eo
.Ar host
.Ec
.Oc
.Oo
.Eo
.Ar config
.Ec
.Oc
.Pp
.Nm
.Eo
.Fl o
.Ec
.Oo
.Eo
.Fl S
.Ec 
.Eo
.Ar addr
.Ec
.Oc
.Oo
.Eo
.Fl p
.Ec 
.Eo
.Ar port
.Ec
.Oc
.Oo
.Eo
.Fl h
.Ec 
.Eo
.Ar host
.Ec
.Oc
.Oo
.Eo
.Ar config
.Ec
.Oc
.Pp
.Nm
.Eo
.Fl g
.Ec 
.Eo
.Ar cert
.Ec
.
.Sh DESCRIPTION
The 
.Nm
IRC client provides a curses interface for sending and receiving messages using the Internet Relay Chat protocol over TLS.
It is a fork of the catgirl IRC client by June McEnroe.
The key change is the addition of a "scroll mode".
.Pp
Like catgirl,
.Nm
is an intentionally simple client.
It connects to only one server at a time,
requires TLS and offers almost no customisation.
.Pp
Unless generating a TLS client certificate with the 
.Eo
.Fl g
.Ec
option,
the user must specify either (1)
the 
.Eo
.Fl h
.Ec
option or (2)
a 
.Eo
.Ar config
.Ec
that includes a host value.
.
.Ss Options
.Pp
.Bl -tag -width Ds
.It Xo
.Eo
.Fl C
.Ec 
.Eo
.Ar value
.Ec | 
.Ic copy 
.Eo
.Ar value
.Ec
.Xc
Set the path for the utility used by the 
.Ic /copy
command to 
.Eo
.Ar value
.Ec .
If the option is provided multiple times,
each 
.Eo
.Ar value
.Ec
is passed as an argument to the utility.
The default is the first available of 
.Eo
.Xr pbcopy 1
.Ec ,
.Eo
.Xr wl-copy 1
.Ec ,
.Eo
.Xr xclip 1
.Ec
or 
.Eo
.Xr xsel 1
.Ec .
.It Xo
.Eo
.Fl H
.Ec 
.Eo
.Ar seed
.Ec | 
.Ic hash 
.Eo
.Ar seed
.Ec
.Xc
Set the seed for assigning the nick and channel colours.
.Nm
uses the username associated with a nick to assign the colour so that colours remain stable across nick changes.
The same seed will result in the same colours being assigned.
To change colours,
choose a different seed.
.It Xo
.Eo
.Fl I
.Ec 
.Eo
.Ar pattern
.Ec | 
.Ic highlight 
.Eo
.Ar pattern
.Ec
.Xc
Add a case-insensitive message highlight pattern.
The pattern may contain 
.Eo \(oq
.No "*"
.Ec \(cq ,
.Eo \(oq
.No "?"
.Ec \(cq
and 
.Eo \(oq
.No "[]"
.Ec \(cq
wildcards as in 
.Eo
.Xr glob 7
.Ec .
The format of the pattern is as follows:
.Bd -literal -offset indent
nick[!user@host [command [channel [message]]]]
.Ed
.Pp
The commands which can be matched are:
.Ic invite ,
.Ic join ,
.Ic nick ,
.Ic notice ,
.Ic part ,
.Ic privmsg ,
.Ic quit ,
.Ic setname .
For example,
to highlight when somebody joins a channel include the following in your configuration file:
.Bd -literal -offset indent
highlight somebody!*@* join #channel
.Ed
.It Xo
.Eo
.Fl N
.Ec 
.Eo
.Ar value
.Ec | 
.Ic notify 
.Eo
.Ar value
.Ec
.Xc
Set the path for the utility used to send notifications.
If the option is provided multiple times,
each 
.Eo
.Ar value
.Ec
is passed as an argument to the utility.
The window name and message are provided to the utility as two additional arguments,
appropriate for 
.Eo
.Xr notify-send 1
.Ec .
.It Xo
.Eo
.Fl O
.Ec 
.Eo
.Ar value
.Ec | 
.Ic open 
.Eo
.Ar value
.Ec
.Xc
Set the path for the utility used by the 
.Ic /open
command to 
.Eo
.Ar value
.Ec .
If the option is provided multiple times,
each 
.Eo
.Ar value
.Ec
is passed as an argument to the utility.
The URL to open is provided to the utility as an additional argument.
The default is the first available of 
.Eo
.Xr open 1
.Ec
or 
.Eo
.Xr xdg-open 1
.Ec .
.It Xo
.Eo
.Fl R
.Ec | 
.Ic restrict
.Xc
Disable the 
.Ic /copy ,
.Ic /exec
and 
.Ic /open
commands,
the notify option,
and viewing this manual with 
.Ic /help .
.It Xo
.Eo
.Fl S
.Ec 
.Eo
.Ar addr
.Ec | 
.Ic bind 
.Eo
.Ar addr
.Ec
.Xc
Bind to source address 
.Eo
.Ar addr
.Ec
when connecting to the server.
To connect from any IPv4 address,
use 0.0.0.0.
To connect from any IPv6 address,
use ::.
.It Xo
.Eo
.Fl T
.Ec Ns
.Oo
.Eo
.Ar format
.Ec
.Oc | 
.Ic timestamp 
.Eo
.Ar format
.Ec
.Xc
Show timestamps by default.
The optional format string is interpreted by 
.Eo
.Xr strftime 3
.Ec .
The string may contain raw IRC formatting codes,
if you can figure out how to enter them.
.It Xo
.Eo
.Fl a
.Ec 
.Eo
.Ar user:pass
.Ec | 
.Ic sasl-plain 
.Eo
.Ar user:pass
.Ec
.Xc
Authenticate with NickServ during connection using SASL PLAIN.
.Nm
will disconnect if authentication fails.
Leave 
.Eo
.Ar pass
.Ec
blank to prompt for the password when 
.Nm
starts.
.It Xo
.Eo
.Fl c
.Ec 
.Eo
.Ar path
.Ec | 
.Ic cert 
.Eo
.Ar path
.Ec
.Xc
Connect using a TLS client certificate loaded from 
.Eo
.Ar path
.Ec .
If a bare filename is provided,
.Nm
will search in 
.Pa $XDG_CONFIG_DIRS/catbus/ .
If the private key is in a separate file,
additionally specify it with the 
.Eo
.Fl k
.Ec
option.
.Pp
To use this certificate to authenticate to NickServ using CertFP,
use the 
.Eo
.Fl e
.Ec
option.
See CertFP Configuration below.
Client certificates can be generated with the 
.Eo
.Fl g
.Ec
flag.
.It Xo
.Eo
.Fl e
.Ec | 
.Ic sasl-external
.Xc
Authenticate with NickServ during connection using CertFP via SASL EXTERNAL.
.Nm
will disconnect if authentication fails.
The client certificate must be specified with the 
.Eo
.Fl c
.Ec
option.
See CertFP Configuration below.
.It Xo
.Eo
.Fl g
.Ec 
.Eo
.Ar path
.Ec
.Xc
Generate a TLS client certificate using 
.Eo
.Xr openssl 1
.Ec
and write it to 
.Eo
.Ar path
.Ec .
.It Xo
.Eo
.Fl h
.Ec 
.Eo
.Ar host
.Ec | 
.Ic host 
.Eo
.Ar host
.Ec
.Xc
The hostname of the IRC server.
.It Xo
.Eo
.Fl i
.Ec 
.Eo
.Ar pattern
.Ec | 
.Ic ignore 
.Eo
.Ar pattern
.Ec
.Xc
Add a case-insensitive message ignore pattern,
which may contain 
.Eo \(oq
.No "*"
.Ec \(cq ,
.Eo \(oq
.No "?"
.Ec \(cq
and 
.Eo \(oq
.No "[]"
.Ec \(cq
wildcards as in 
.Eo
.Xr glob 7
.Ec .
The format of the pattern is as follows:
.Bd -literal -offset indent
nick[!user@host [command [channel [message]]]]
.Ed
.Pp
The commands which can be matched are:
.Ic invite ,
.Ic join ,
.Ic nick ,
.Ic notice ,
.Ic part ,
.Ic privmsg ,
.Ic quit ,
.Ic setname .
.Pp
Visibility of ignored messages can be toggled using 
.Ic M--
and 
.Ic M-+ .
.It Xo
.Eo
.Fl j
.Ec 
.Eo
.Ar channels
.Ec 
.Oo
.Eo
.Ar keys
.Ec
.Oc | 
.Ic join 
.Eo
.Ar channels
.Ec 
.Oo
.Eo
.Ar keys
.Ec
.Oc
.Xc
Join the comma-separated list of channels with the optional comma-separated list of channel keys.
No spaces may appear in either list.
.It Xo
.Eo
.Fl k
.Ec 
.Eo
.Ar path
.Ec | 
.Ic priv 
.Eo
.Ar path
.Ec
.Xc
Load the TLS client private key for a certificate loaded with the 
.Eo
.Fl c
.Ec
option from 
.Eo
.Ar path
.Ec .
If a bare filename is provided,
.Nm
will search in 
.Pa $XDG_CONFIG_DIRS/catbus/ .
.It Xo
.Eo
.Fl l
.Ec | 
.Ic log
.Xc
Log messages to files in 
.Pa $XDG_DATA_HOME/catbus/log/
(usually 
.Pa ~/.local/share/catbus/log/ ).
Directories are created for each network and channel,
and files are created for each date in the format 
.Eo \(oq
.No "YYYY-MM-DD.log"
.Ec \(cq .
.It Xo
.Eo
.Fl m
.Ec 
.Eo
.Ar modes
.Ec | 
.Ic mode 
.Eo
.Ar modes
.Ec
.Xc
Set user modes as soon as possible after connecting.
.It Xo
.Eo
.Fl n
.Ec 
.Eo
.Ar nick
.Ec 
.Oo
.Eo
.No ...
.Ec
.Oc | 
.Ic nick 
.Eo
.Ar nick
.Ec 
.Oo
.Eo
.No ...
.Ec
.Oc
.Xc
Set the nickname with optional fallbacks,
should one nick be unavailable.
Each nick is treated as a highlight word.
The default nickname is the value of 
.Ev USER
in the current environment.
.It Xo
.Eo
.Fl o
.Ec
.Xc
Connect to the server only to obtain its certificate chain and write it to standard output in PEM format.
.It Xo
.Eo
.Fl p
.Ec 
.Eo
.Ar port
.Ec | 
.Ic port 
.Eo
.Ar port
.Ec
.Xc
The port of the IRC server.
The default port is 6697.
.It Xo
.Eo
.Fl q
.Ec | 
.Ic quiet
.Xc
Raise the default message visibility threshold for new windows,
hiding general events (\c
.Ic joins ,
.Ic quits ,
etc.).
The threshold can be lowered with 
.Ic M-- .
.It Xo
.Eo
.Fl r
.Ec 
.Eo
.Ar name
.Ec | 
.Ic real 
.Eo
.Ar name
.Ec
.Xc
Set the "real name" which appears in 
.Ic /whois .
The default is the same as the nickname.
This is a good place to add your pronouns.
.It Xo
.Eo
.Fl s
.Ec 
.Eo
.Ar path
.Ec | 
.Ic save 
.Eo
.Ar path
.Ec
.Xc
Persist windows and their scrollback in a file located at 
.Eo
.Ar path
.Ec .
If a bare filename is provided,
.Nm
will use 
.Pa $XDG_DATA_HOME/catbus/
(usually 
.Pa ~/.local/share/catbus/ ).
.It Xo
.Eo
.Fl t
.Ec 
.Eo
.Ar path
.Ec | 
.Ic trust 
.Eo
.Ar path
.Ec
.Xc
Trust the self-signed certificate at 
.Eo
.Ar path
.Ec .
If a bare filename is provided,
.Nm
will search in 
.Pa $XDG_CONFIG_DIRS/catbus/
(usually 
.Pa ~/.config/catbus/ ).
Will also disable server name verification.
See Self-signed Certificate Configuration below.
.It Xo
.Eo
.Fl u
.Ec 
.Eo
.Ar username
.Ec | 
.Ic user 
.Eo
.Ar username
.Ec
.Xc
Set the username.
This is almost entirely irrelevant,
except that it's more likely to remain stable,
and 
.Nm
uses it to assign nick colours.
The default is to use the nickname.
.It Xo
.Eo
.Fl v
.Ec | 
.Ic debug
.Xc
Log raw IRC protocol to the \<debug\> window,
as well as 
.Ev STDERR
if it is not a terminal.
.It Xo
.Eo
.Fl w
.Ec 
.Eo
.Ar pass
.Ec | 
.Ic pass 
.Eo
.Ar pass
.Ec
.Xc
Connect using a server password.
Leave 
.Eo
.Ar pass
.Ec
blank (using an 
.Eo \(oq
.No "="
.Ec \(cq )
to prompt for the password when 
.Nm
starts.
.El
.
.Sh CONFIGURATION
.
.Ss Configuration Files
Options can be loaded from 
.Eo
.Ar config
.Ec ,
a configuration file.
.Nm
searches for the specified configuration file in 
.Pa $XDG_CONFIG_DIRS/catbus/
(usually 
.Pa ~/.config/catbus/ ).
.Pp
Each option must be placed on a new line.
Lines that begin with 
.Eo \(oq
.No "#"
.Ec \(cq
are ignored.
An optional 
.Eo \(oq
.No "="
.Ec \(cq
may appear between an option name and its value.
The options are listed above following their corresponding flags.
.Pp
Flags and options in files are processed in the order they appear on the command line,
so later values generally override earlier values (for an exception,
see 
.Eo
.Fl C
.Ec ).
.
.Ss CertFP Configuration
CertFP is an authentication method that uses a certificate fingerprint rather than an account password to authenticate with NickServ.
Support varies by IRC network.
.Pp
.Bl -enum
.It
Generate a new TLS client certificate:
.Bd -literal -offset indent
$ catbus -g ~/.config/catbus/example.client.pem
.Ed
.It
Connect to the server using the certificate by adding the following to the relevant configuration file:
.Bd -literal -offset indent
cert example.client.pem
.Ed
.It
Identify with NickServ,
then add the certificate fingerprint to your account:
.Bd -literal -offset indent
/ns CERT ADD
.Ed
.It
Enable SASL EXTERNAL in your configuration file to require successful authentication when connecting:
.Bd -literal -offset indent
cert example.client.pem
sasl-external
.Ed
.El
.
.Ss Self-signed Certificate Configuration
If connecting to a server fails with a certificate verification error due to a self-signed certificate,
it needs to be trusted manually.
.Pp
.Bl -enum
.It
Connect to the server and write its certificate to a file:
.Bd -literal -offset indent
$ catbus -o -h irc.example.org > ~/.config/catbus/example.server.pem
.Ed
.It
Configure 
.Nm
to trust the certificate:
.Bd -literal -offset indent
trust example.server.pem
.Ed
.El
.
.Sh INTERFACE
The 
.Nm
interface is split into three main areas.
.
.Ss Status Line
The top line of the terminal shows window statuses.
Only the currently active window and windows with activity are shown.
The status line for a window might look like this:
.Bd -literal -offset indent
1+ #catbus +3 ~7 @
.Ed
.Pp
The number on the left is the window number.
Following it may be one of 
.Eo \(oq
.No "-"
.Ec \(cq ,
.Eo \(oq
.No "+"
.Ec \(cq
or 
.Eo \(oq
.No "++"
.Ec \(cq ,
as well as 
.Eo \(oq
.No "="
.Ec \(cq .
These indicate the message visibility threshold and mute status of the window.
.Pp
On the right side,
the number following 
.Eo \(oq
.No "+"
.Ec \(cq
indicates the number of unread messages.
The number following 
.Eo \(oq
.No "~"
.Ec \(cq
indicates how many lines are below the current scroll position.
An 
.Eo \(oq
.No "@"
.Ec \(cq
indicates that there is unsent input waiting in the window's Input Line.
.Pp
.Nm
will also set the terminal title,
if possible,
to the name of the network and active window,
followed by the unread count for that window,
and the unread count for all other windows in parentheses.
.
.Ss Chat Area
The Chat Area shows messages and events.
Regular messages are shown with the nick between 
.Eo \(oq
.No "<>"
.Ec \(cq
angle brackets.
Actions are shown with the nick preceded by 
.Eo \(oq
.No "*"
.Ec \(cq .
Notices are shown with the nick between 
.Eo \(oq
.No "-"
.Ec \(cq
hyphens.
.Pp
Blank lines are inserted into the chat as unread markers whenever there are messages in a window that is not active or the terminal is not focused (in some terminal emulators).
.Pp
While scrolling,
the most recent five lines of chat are kept visible below a marker line.
.
.Ss Input Line
The bottom line of the window is where messages and commands are entered.
When entering a message,
action or notice,
your nick appears on the left,
as it would in the Chat Area.
When entering a command,
no nick is shown.
In scroll mode,
the Input Line is coloured grey.
.Pp
Formatting codes are shown in the Input Line as reverse-video uppercase letters.
These will not appear in the sent message.
.Pp
Input that is too long to send as a single message will have a red background starting at the point where the input will be split into a second message.
.
.Sh COMMANDS
Commands can be abbreviated if no other command shares the same prefix.
For example,
.Ic /join
can be typed 
.Ic /j ,
and 
.Ic /window
can be typed 
.Ic /wi .
.
.Ss Chat Commands
.Pp
.Bl -tag -width Ds
.It Xo
.Ic /away 
.Oo
.Eo
.Ar message
.Ec
.Oc
.Xc
Set or clear your away status.
This is sent in reply to private messages and shown in 
.Ic /whois .
.It Xo
.Ic /cs 
.Eo
.Ar command
.Ec
.Xc
Send a command to ChanServ,
the service for managing registered channels.
.It Xo
.Ic /invite 
.Eo
.Ar nick
.Ec
.Xc
Invite someone to the channel.
.It Xo
.Ic /join [
.Eo
.Ar channel
.Ec 
.Oo
.Eo
.Ar key
.Ec
.Oc]
.Xc
Join the named channel,
the current channel (if you've left),
or the channel to which you've been invited.
.It Xo
.Ic /list 
.Oo
.Eo
.Ar search
.Ec
.Oc
.Xc
List channels,
their user counts and their topics.
The 
.Eo
.Ar search
.Ec
can usually contain 
.Eo
.Xr glob 7
.Ec Ns -style wildcards.
.It Xo
.Ic /me 
.Oo
.Eo
.Ar action
.Ec
.Oc
.Xc
Send an action message.
These are used to write messages in the third person.
.It Xo
.Ic /msg 
.Eo
.Ar nick
.Ec 
.Eo
.Ar message
.Ec
.Xc
Send a private message to someone.
.It Xo
.Ic /names
.Xc
List the users in the channel.
.It Xo
.Ic /nick 
.Eo
.Ar nick
.Ec
.Xc
Change your nickname.
.It Xo
.Ic /notice 
.Eo
.Ar message
.Ec
.Xc
Send a notice.
It's best not to do this.
.It Xo
.Ic /ns 
.Eo
.Ar command
.Ec
.Xc
Send a command to NickServ,
the service for managing your account.
.It Xo
.Ic /ops
.Xc
List channel operators.
They can kick or ban someone from the channel.
.It Xo
.Ic /part 
.Oo
.Eo
.Ar message
.Ec
.Oc
.Xc
Leave the channel.
Use 
.Ic /close
if you want to close the window afterward.
.It Xo
.Ic /query 
.Eo
.Ar nick
.Ec
.Xc
Start a private conversation with someone.
.It Xo
.Ic /quit 
.Oo
.Eo
.Ar message
.Ec
.Oc
.Xc
Disconnect from IRC and close 
.Nm .
You can do this even quicker with 
.Ic C-c .
.It Xo
.Ic /quote 
.Eo
.Ar command
.Ec
.Xc
Send a raw IRC command.
Often 
.Nm
will not know how to interpret the results.
You can use 
.Ic M--
to show unknown server responses in the 
.Ic <network>
or channel windows.
.It Xo
.Ic /say 
.Eo
.Ar message
.Ec
.Xc
Send a regular message.
This is useful if the message you want to send begins with a slash.
.It Xo
.Ic /setname 
.Eo
.Ar name
.Ec
.Xc
Update your "real name" if the server supports it.
This may be broadcast to other users with clients that support it.
.It Xo
.Ic /topic 
.Oo
.Eo
.Ar topic
.Ec
.Oc
.Xc
Show or set the topic of the channel.
Press 
.Ic Tab
twice immediately after 
.Ic /topic
to copy the current topic.
.It Xo
.Ic /whois 
.Oo
.Eo
.Ar nick
.Ec
.Oc
.Xc
Query information about a user.
.It Xo
.Ic /whowas 
.Eo
.Ar nick
.Ec
.Xc
Query past information about a user.
.El
.
.Ss Interface Commands
.Pp
.Bl -tag -width Ds
.It Xo
.Ic /close 
.Oo
.Eo
.Ar name
.Ec
.Eo
.Ar num
.Ec
.Oc
.Xc
Close the named,
numbered or current window.
.It Xo
.Ic /copy 
.Oo
.Eo
.Ar nick
.Ec
.Eo
.Ar substring
.Ec
.Oc
.Xc
Copy the most recent URL from nick or matching substring.
.It Xo
.Ic /debug
.Xc
Toggle logging in the \<debug\> window.
.It Xo
.Ic /exec 
.Eo
.Ar command
.Ec
.Xc
Run 
.Eo
.Ar command
.Ec
with 
.Ev SHELL
and interpret its output as input to the current window,
including as commands.
.It Xo
.Ic /help
.Xc
View this manual.
Type 
.Eo \(oq
.No "q"
.Ec \(cq
to return to 
.Nm .
.It Xo
.Ic /help 
.Eo
.Ar topic
.Ec
.Xc
List the server help for a topic.
Try 
.Ic /help
.Ic index
for a list of topics.
.It Xo
.Ic /highlight 
.Oo
.Eo
.Ar pattern
.Ec
.Oc
.Xc
List message highlight patterns or temporarily add a pattern.
To permanently add a pattern,
use the 
.Ic highlight
option.
.It Xo
.Ic /ignore 
.Oo
.Eo
.Ar pattern
.Ec
.Oc
.Xc
List message ignore patterns or temporarily add a pattern.
To permanently add a pattern,
use the ignore option.
.It Xo
.Ic /move 
.Oo
.Eo
.Ar name
.Ec
.Oc num
.Xc
Move the named or current window to number.
.It Xo
.Ic /open [count]
.Xc
Open each of 
.Eo
.Ar count
.Ec
most recent URLs.
.It Xo
.Ic /open 
.Eo
.Ar nick
.Ec
.Eo
.Ar substring
.Ec
.Xc
Open the most recent URL from nick or matching substring.
.It Xo
.Ic /unhighlight 
.Eo
.Ar pattern
.Ec
.Xc
Temporarily remove a message highlight pattern.
.It Xo
.Ic /unignore 
.Eo
.Ar pattern
.Ec
.Xc
Temporarily remove a message ignore pattern.
.It Xo
.Ic /window
.Xc
List all windows.
.It Xo
.Ic /window 
.Eo
.Ar name
.Ec
.Eo
.Ar num
.Ec
.Eo
.Ar substring
.Ec
.Xc
Switch to window by name,
num or matching substring.
Note that it is possible to switch to a window by typing 
.Pa /num
where 
.Eo \(oq
.No "num"
.Ec \(cq
is a number.
.El
.
.Ss Operator Commands
.Pp
.Bl -tag -width Ds
.It Xo
.Ic /ban 
.Oo
.Eo
.Ar mask
.Ec 
.Eo
.No ...
.Ec
.Oc
.Xc
List or ban masks from the channel.
.It Xo
.Ic /deop 
.Oo
.Eo
.Ar nick
.Ec 
.Eo
.No ...
.Ec
.Oc
.Xc
Revoke channel operator status from users or yourself.
.It Xo
.Ic /devoice 
.Oo
.Eo
.Ar nick
.Ec 
.Eo
.No ...
.Ec
.Oc
.Xc
Revoke voice from users or yourself in the channel.
.It Xo
.Ic /except 
.Oo
.Eo
.Ar mask
.Ec 
.Eo
.No ...
.Ec
.Oc
.Xc
List or add masks to the channel ban exception list.
.It Xo
.Ic /invex 
.Oo
.Eo
.Ar mask
.Ec 
.Eo
.No ...
.Ec
.Oc
.Xc
List or add masks to the channel invite list.
.It Xo
.Ic /kick 
.Eo
.Ar nick
.Ec 
.Oo
.Eo
.Ar message
.Ec
.Oc
.Xc
Kick a user from the channel.
.It Xo
.Ic /mode 
.Oo
.Eo
.Ar modes
.Ec
.Oc 
.Oo
.Eo
.Ar param
.Ec 
.Eo
.No ...
.Ec
.Oc
.Xc
Show or set channel modes.
In the <network> window,
show or set user modes.
.It Xo
.Ic /op 
.Oo
.Eo
.Ar nick
.Ec 
.Eo
.No ...
.Ec
.Oc
.Xc
Grant users or yourself channel operator status.
.It Xo
.Ic /unban 
.Eo
.Ar mask
.Ec 
.Oo
.Eo
.No ...
.Ec
.Oc
.Xc
Unban masks from the channel.
.It Xo
.Ic /unexcept 
.Eo
.Ar mask
.Ec 
.Oo
.Eo
.No ...
.Ec
.Oc
.Xc
Remove masks from the channel ban exception list.
.It Xo
.Ic /uninvex 
.Eo
.Ar mask
.Ec 
.Oo
.Eo
.No ...
.Ec
.Oc
.Xc
Remove masks from the channel invite list.
.It Xo
.Ic /voice 
.Oo
.Eo
.Ar nick
.Ec 
.Eo
.No ...
.Ec
.Oc
.Xc
Grant users or yourself voice in the channel.
.El
.
.Sh KEY BINDINGS
The 
.Nm
interface supports 
.Eo
.Xr emacs 1
.Ec Ns -like line editing and 
.Eo
.Xr vim 1
.Ec Ns -like window scrolling (an ability some consider to be unnatural).
To scroll a window,
the user must put 
.Nm
into scroll mode.
.Pp
.Nm
also supports key bindings for IRC formatting.
In the lists below,
the prefixes 
.Ic C-
and 
.Ic M-
represent the control and meta (alt)
modifiers respectively.
.
.Ss Line Editing
.Pp
.Bl -tag -width Ds -compact
.It Xo
.Ic C-a
.Xc
Move to beginning of line.
.It Xo
.Ic C-b
.Xc
Move left.
.It Xo
.Ic C-d
.Xc
Delete next character.
.It Xo
.Ic C-e
.Xc
Move to end of line.
.It Xo
.Ic C-f
.Xc
Move right.
.It Xo
.Ic C-k
.Xc
Delete to end of line.
.It Xo
.Ic C-t
.Xc
Transpose characters.
.It Xo
.Ic C-u
.Xc
Delete to beginning of line.
.It Xo
.Ic C-w
.Xc
Delete previous word.
.It Xo
.Ic C-x
.Xc
Expand a text macro beginning with '\e'.
.It Xo
.Ic C-y
.Xc
Paste previously deleted text.
.It Xo
.Ic M-Enter
.Xc
Insert a newline without sending a command.
.It Xo
.Ic M-b
.Xc
Move to previous word.
.It Xo
.Ic M-d
.Xc
Delete next word.
.It Xo
.Ic M-f
.Xc
Move to next word.
.It Xo
.Ic M-q
.Xc
Collapse all whitespace.
.It Xo
.Ic Tab
.Xc
Complete nick,
channel,
command or macro.
.El
.
.Ss Window Keys
.Pp
.Bl -tag -width Ds -compact
.It Xo
.Ic C-l
.Xc
Redraw the UI.
.It Xo
.Ic C-n
.Xc
Switch to next window.
.It Xo
.Ic C-p
.Xc
Switch to previous window.
.It Xo
.Ic C-v
.Xc
Enter scroll mode.
.It Xo
.Ic M-+
.Xc
Raise message visibility threshold,
hiding ignored messages,
general events (joins,
quits,
etc.),
or non-highlighted messages.
.It Xo
.Ic M--
.Xc
Lower message visibility threshold,
showing ignored messages and unknown replies.
.It Xo
.Ic M-=
.Xc
Toggle mute.
Muted windows do not appear in the status line unless you are mentioned.
.It Xo
.Ic C-/
.Xc
Switch to previously selected window.
.It Xo
.Ic M-n
.Xc
Switch to window by number 0–9.
.It Xo
.Ic M-a
.Xc
Cycle through unread windows.
.It Xo
.Ic M-l
.Xc
List the contents of the window without word-wrapping and with timestamps.
Press 
.Ic Enter
to return to 
.Nm .
.It Xo
.Ic M-m
.Xc
Insert a blank line in the window.
.It Xo
.Ic M-s
.Xc
Reveal spoiler text.
.It Xo
.Ic M-t
.Xc
Toggle timestamps.
.El
.
.Ss Scroll Mode Keys
.Pp
.Bl -tag -width Ds -compact
.It Xo
.Ic j
.Xc
Scroll down a line.
.It Xo
.Ic k
.Xc
Scroll up a line.
.It Xo
.Ic q
.Xc
Leave scroll mode.
.It Xo
.Ic u
.Xc
Scroll to first unread line.
.It Xo
.Ic C-u
.Xc
Scroll up a page.
.It Xo
.Ic C-d
.Xc
Scroll down a page.
.It Xo
.Ic C-f
.Xc
Scroll forward half a page.
.It Xo
.Ic C-b
.Xc
Scroll back half a page.
.El
.
.Ss IRC Formatting
.Pp
.Bl -tag -width Ds -compact
.It Xo
.Ic C-z C-v
.Xc
Insert the next input character literally.
.It Xo
.Ic C-z b
.Xc
Toggle bold.
.It Xo
.Ic C-z c
.Xc
Set or reset colour.
.It Xo
.Ic C-z i
.Xc
Toggle italics.
.It Xo
.Ic C-z o
.Xc
Reset formatting.
.It Xo
.Ic C-z p
.Xc
Manually toggle paste mode.
.It Xo
.Ic C-z r
.Xc
Toggle reverse colour.
.It Xo
.Ic C-z s
.Xc
Set spoiler text (black on black).
.It Xo
.Ic C-z u
.Xc
Toggle underline.
.El
.Pp
Some colour codes can be entered using the following bindings:
.Bl -column "     " "       " "     " "                    "
.It Xo
.Ic C-z A
.Ta 
gray
.Ta 
.Ic C-z N
.Ta 
brown (dark red)
.Xc
.It Xo
.Ic C-z B
.Ta 
blue
.Ta 
.Ic C-z O
.Ta 
orange (dark yellow)
.Xc
.It Xo
.Ic C-z C
.Ta 
cyan
.Ta 
.Ic C-z P
.Ta 
pink (light magenta)
.Xc
.It Xo
.Ic C-z G
.Ta 
green
.Ta 
.Ic C-z R
.Ta 
red
.Xc
.It Xo
.Ic C-z K
.Ta 
black
.Ta 
.Ic C-z W
.Ta 
white
.Xc
.It Xo
.Ic C-z M
.Ta 
magenta
.Ta 
.Ic C-z Y
.Ta 
yellow
.Xc
.El
.Pp
To set other colours,
follow 
.Ic C-z c
by one or two digits for the foreground colour,
optionally followed by a comma and one or two digits for the background colour.
To reset colour,
follow 
.Ic C-z c
by a non-digit.
.Pp
The colour numbers are as follows:
.Bl -column "  " "                    " "  " "                    "
.It Xo
0
.Ta 
white
.Ta 
8
.Ta 
yellow
.Xc
.It Xo
1
.Ta 
black
.Ta 
9
.Ta 
light green
.Xc
.It Xo
2
.Ta 
blue
.Ta 
10
.Ta 
cyan
.Xc
.It Xo
3
.Ta 
green
.Ta 
11
.Ta 
light cyan
.Xc
.It Xo
4
.Ta 
red
.Ta 
12
.Ta 
light blue
.Xc
.It Xo
5
.Ta 
brown (dark red)
.Ta 
13
.Ta 
pink (light magenta)
.Xc
.It Xo
6
.Ta 
magenta
.Ta 
14
.Ta 
gray
.Xc
.It Xo
7
.Ta 
orange (dark yellow)
.Ta 
15
.Ta 
light gray
.Xc
.It Xo
99
.Ta 
default
.Ta 
.Ta 
.Xc
.El
.
.Sh ENVIRONMENT
.Pp
.Bl -tag -width Ds
.It Xo
.Ev SHELL
.Xc
The shell used by 
.Ic /exec .
The default is 
.Pa /bin/sh .
.It Xo
.Ev USER
.Xc
The default nickname.
.El
.
.Sh FILES
.Pp
.Bl -tag -width Ds
.It Xo
.Pa $XDG_CONFIG_DIRS/catbus
.Xc
Configuration files are searched for first in 
.Ev $XDG_CONFIG_DIRS
(usually 
.Pa ./config/ )
followed by the colon-separated list of paths,
.Ev $XDG_CONFIG_DIRS
(usually 
.Pa /etc/xdg/ ).
.It Xo
.Pa ~/.config/catbus
.Xc
The most likely location of configuration files.
.It Xo
.Pa $XDG_DATA_DIRS/catbus
.Xc
Save files are searched for first in 
.Ev $XDG_DATA_DIRS
(usually 
.Pa ~/.local/share/ )
followed by the colon-separated list of paths,
.Ev $XDG_DATA_DIRS
(usually 
.Pa /usr/local/share:/usr/share ).
.It Xo
.Pa ~/.local/share/catbus
.Xc
The most likely location of save files.
.El
.
.Sh EXIT STATUS
The 
.Nm
utility exits 0 if requested by the user,
69 if the connection is lost and >0 if any other error occurs.
.
.Sh EXAMPLES
Join the #catbus channel on the Libera IRC server from the command line:
.Bd -literal -offset indent
catbus -h irc.libera.chat -j "#catbus"
.Ed
.Pp
Create a configuration file in 
.Pa ~/.config/catbus/libera :
.Bd -literal -offset indent
host irc.libera.chat
join #catbus
.Ed
.Pp
Load the configuration file:
.Bd -literal -offset indent
$ catbus libera
.Ed
.
.Sh EXTENSIONS
Like catgirl,
the 
.Nm
client implements the \c
.Bf Sy
causal.agency/consumer
.Ef
vendor-specific IRCv3 capability offered by 
.Eo
.Xr pounce 1
.Ec .
The consumer position is stored in the save file.
.
.
.Sh AUTHORS
.An Michael Camilleri Aq Mt mike@inqk.net
.Sh BUGS
Report issues at 
.Lk https://github.com/pyrmont/catbus
or join #catbus on irc.libera.chat.

# Predoc

[![Test Status](https://github.com/pyrmont/predoc/workflows/test/badge.svg)](https://github.com/pyrmont/predoc/actions?query=workflow%3Atest)

Predoc is a Markdown flavour specifically designed for writing manpages.

This is the repository for the reference implementation of the parser and
renderer written in the Janet programming language. It includes a command-line
utility, `predoc`, which converts a Predoc document into a manpage written in
mdoc.

> [!WARNING]
> Predoc is in an alpha stage of development. There are likely to be bugs and
> gaps in its implementation.

## Example

Predoc allows you to take this:

```md
---
Title: PREDOC(1)
Authors: Michael Camilleri <mike@inqk.net>
Date: August 10, 2025
Project: Predoc
Version: 0.1-dev
---

NAME
====

**predoc** - converter from Predoc to mdoc

SYNOPSIS
========

**predoc** [**--format** _fmt_] [**--name** _program_] [**--no-ad**]
           [**--output** _path_] _input_

DESCRIPTION
===========

**predoc** is a command-line tool for converting documents written in
`predoc(7)` to manpages written in `mdoc(7)`.
```

and convert it to this:

```mdoc
.\"
.\" Generated by predoc at 2025-08-26T16:17:25Z
.\"
.Dd August 10, 2025
.Dt PREDOC 1
.Os Predoc 0.1-dev
.
.Sh NAME
.Nm predoc
.Nd converter from Predoc to mdoc
.
.Sh SYNOPSIS
.Nm
.Oo
.Fl -format 
.Ar \&fmt
.Oc
.Oo
.Fl -name 
.Ar \&program
.Oc
.Oo
.Fl -no-ad
.Oc
.Oo
.Fl -output 
.Ar \&path
.Oc
.Ar \&input
.
.Sh DESCRIPTION
.Nm
is a command-line tool for converting documents written in 
.Xr predoc 7\&
to manpages written in 
.Xr mdoc 7\& .
```

which in turn is rendered by `man` into this:

<img src="./res/example.png?v=3" alt="Part of the predoc(1) manpage" title="Part of the predoc(1) manpage" style="width: 100%; height: auto;">

## Language

### Rationale

Documentation is great and manpages can be a wonderful source of information.
But people are discouraged from creating or updating manpages because the syntax
of mdoc and roff (the markup languages used for these documents) is
intimidating.

Predoc aims to remedy this. Markdown allows a person to create HTML that 'looks
like' what they wrote. Predoc wants to do the same thing for manpages: create
mdoc that 'looks like' what is written in plain text.

### Syntax

Like Markdown, Predoc is a lightweight markup language that optimises for
ease-of-reading and ease-of-writing. It does this by specifying its syntactic
constructs using punctuation characters.

More information about the Predoc language is in `predoc(7)`. You can
(hopefully) see the benefit of writing manpages in Predoc by reading the
[Predoc version][predoc-syntax] directly.

[predoc-syntax]: predoc.7.predoc

## Utility

### Prerequisites

The `predoc` command-line utility is written in the Janet programming language.
Janet is a Lisp written in C that has no dependencies.

You need Janet installed on your system to run `predoc`. Janet is available for
Linux, macOS, Windows and various BSDs. [See here][janet-install] for more
information about installing it.

[janet-install]: https://janet-lang.org/docs/

### Installation

After installing Janet, clone the repository and run `janet --install predoc`
from the project root.

### Usage

To convert a Predoc document called `example.1.predoc` into the manpage
`example.1` for the program `example`, you can write:

```
$ predoc example.1.predoc
```

If only the input filename is given, `predoc` will use this to derive the
program name and the output filename.

To specify these values explicitly, you can write:

```
$ predoc --name example --output example.1 example.1.predoc
```

## Bugs

Found a bug? I'd love to know about it. The best way is to report your bug in
the [Issues][github-issues] section on GitHub.

[github-issues]: https://github.com/pyrmont/predoc/issues

## Licence

Predoc is licensed under the MIT Licence. See [LICENSE][predoc-licence] for more
details.

[predoc-licence]: https://github.com/pyrmont/predoc/blob/master/LICENSE
